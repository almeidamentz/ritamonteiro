// Arquivo: api/consultar.js
// ESTA É A SUA BASE DE DADOS SEGURA.
// ELA FICA NO SERVIDOR, INACESSÍVEL PELO NAVEGADOR.
const baseDeDados = {
  "00239384121": "moreninha.guedes31@gmail.com",
  "00200241184": "edsonjosemagal@gmail.com",
  "99860872104": "likasilva23@yahoo.com.br",
  "02264299118": "mayseportobellomt@gmail.com",
  "98518860172": "milton.souza@castrillon.com.br",
  "00006340180": "anaribeiro_6@hotmail.com",
  "81515103153": "geni.afo10@gmail.com",
  "52797511115": "antonia.domingues@tjmt.jus.br",
  "26682023880": "helenagrafitte@hotmail.com",
  "47434023104": "rodriguesprado44@hotmail.com",
  "02098987129": "danielesan19@gmail.com",
  "02217829157": "murrodrigues@gmail.com",
  "00291444180": "vieira.gisele221@gmail.com",
  "84606347104": "elisangelaalvesdelimacosta@gmail.com",
  "90772601100": "titansonorizacao@hotmail.com",
  "03857036869": "joaopiress.net@gmail.com",
  "35297182115": "jofeliar@gmail.com",
  "04284957104": "hiandrathayna@gmail.com",
  "52368432949": "irleilopes@hotmail.com",
  "94837716172": "maxy.gugu@icloud.com",
  "90870360191": "almeidamentz@gmail.com",
  "92243169134": "monyemanuelly@hotmail.com",
  "84928409191": "antonialemes45@gmail.com",
  "88235629100": "olionepmmt@yahoo.com.br",
  "73004278200": "marcosaraujopavao@gmail.com",
  "08620206540": "mikeiaspavao@gmail.com",
  "70286116120": "vanessamiguxa77@gmail.com",
  "43468543700": "raul.itamarati@gmail.com",
  "01332202144": "karina.taty.20@gmail.com",
  "66783879100": "netoaraujo.1975.21@gmail.com",
  "51447029100": "refrigeracao1815@gmail.com",
  "45404682949": "lopes.herba@gmail.com",
  "50372351115": "luciana.tucano@gmail.com",
  "11443950114": "luciana.tucano@gmail.com",
  "94122571120": "luciana.tucano@gmail.com",
  "62796860191": "claudiradv@hotmail.com",
  "00565241109": "valksouza085@gmail.com",
  "95579397100": "joseliacaceres1@gmail.com",
  "06641925137": "rayanic.martins@gmail.com",
  "05452700145": "a94cabral@gmail.com",
  "48245283134": "adv_anaclara@hotmail.com",
  "00868594121": "kesiaaugusta19@gmail.com",
  "70707340187": "kesiaaugusta19@gmail.com",
  "62945998149": "josi.barros.vg@gmail.com",
  "90521544149": "ednaldoanthony@gmail.com",
  "14264358191": "cabralpai@hotmail.com",
  "34011420115": "fraancampos@icloud.com",
  "61625965168": "gilmarazounar@hotmail.com",
  "04395886183": "camila-rodrigues15@hotmail.com.br",
  "04188073969": "robertnickson@hotmail.com",
  "06540679106": "leonardoenunes@outlook.com",
  "82835004149": "luiza.23.lb@gmail.com",
  "87489031168": "tarcizof@gmail.com",
  "34638300197": "marciaalveslima1965@gmail.com",
  "03658089113": "dudarsoaressoares@gmail.com",
  "03971688101": "emanoelflorentinorodrigues@gmail.com",
  "46848533149": "madalenrodrigues39@gmail.com",
  "68405405291": "leonidascorreiadesouza4@gmail.com",
  "05881042131": "bastosgabriela643@gmail.com",
  "96634847134": "gisele_laura08@hotmail.com",
  "53128885168": "ampliatomoveisplanejados@gmail.com",
  "05314090155": "ampliatomoveisplanejados@gmail.com",
  "76878032191": "cresmarques@gmail.com",
  "87846330853": "helenitaschultz@gmail.com",
  "06183376108": "moniknathy4@gmail.com",
  "47401850168": "rabelofamilia@hotmail.com",
  "04141852180": "f-juninho@hotmail.com",
  "58093346104": "lopes.herba@gmail.com",
  "01235848175": "jardinibel@gmail.com",
  "31407196120": "andrelina.aguinaldo@gmail.com",
  "34663142168": "figueredojoselina@gmail.com",
  "00187231109": "musystemgame@gmail.com",
  "03041627108": "luizinhofigueiredo33@gmail.com",
  "69805148149": "angelaferreira31081980@gmail.com",
  "92941001115": "picollimaquinas2108@gmail.com",
  "17619050159": "mirobritomb@gmail.com",
  "29315484134": "fatimalucy@yahoo.com.br",
  "49029258187": "roseni_pvieira@hotmail.com",
  "52211916104": "anamariadearruda935@gmail.com",
  "78491142134": "regiane.mar@gmail.com",
  "42085292291": "clodoaldomercantil@outlook.com",
  "53168615153": "gilsongcl@hotmail.com",
  "20860102149": "sailespaula01@hotmail.com",
  "02246557100": "sailespauladecampos99@gmail.com",
  "87105985100": "jesusilva81@gmail.com",
  "06552418175": "mariaeduardaalmeida229@gmail.com",
  "50262238187": "chrysmarinho3@gmail.com",
  "05515135199": "leonardomarinho10@live.com",
  "70367663600": "amaralroberta17@gmail.com",
  "06188051177": "luizdarsie223@hotmail.com",
  "51338440187": "julianarangel083@gmail.com",
  "23015748149": "moreninha.guedes31@gmail.com",
  "87516322172": "geni.afo@hotmail.com",
  "56970935191": "amaraljoacy4@gmail.com",
  "36298018115": "goncalinarosemeire2@gmail.com",
  "07988234102": "kawam.kawamm@gmail.com",
  "82558299115": "climadecar@hotmail.com",
  "53777344168": "cristinne.almeida@gmail.com",
  "03063379166": "cristinne.almeida@gmail.com",
  "32572972115": "cristinne.almeida@gmail.com",
  "48341487187": "adilsonbarrosfer@hotmail.com",
  "81029837104": "eucarisferreira@gmail.com",
  "00016154169": "elisabarella@sapo.pt",
  "60950099104": "andreiaarios@gmail.com",
  "90569636272": "alc.contador@gmail.com",
  "01421785196": "geisa.sumaya@gmail.com",
  "71599550130": "hevellenjuliana@hotmail.com",
  "04707335195": "hevellenjuliana@hotmail.com",
  "63023229104": "cidocaacampos@hotmail.com",
  "78320518172": "edilaynechagas@icloud.com",
  "76923169291": "israel.silva.vgd@gmail.com",
  "03722556392": "joana.mt.vgd@gmail.com",
  "07847196832": "celia_felixsanti@hotmail.com",
  "00721063101": "celia_felixsanti@hotmail.com",
  "93587538115": "eder.oliveira@rech.com",
  "76906841149": "sirleneoliveiraalves02@gmail.com",
  "08604597999": "meiric4@gmail.com",
  "34986267876": "max.gdisque@gmail.com",
  "03640778162": "telesstephani@gmail.com",
  "03372767144": "piettro31@gmail.com",
  "50390120120": "regiane29re@gmail.com",
  "00057121141": "marceloceron12@gmail.com",
  "70386161100": "marceloceron.eurofarma@gmail.com",
  "77562550115": "marciaarguelhoarce@gmail.com",
  "57023131191": "maria.azenir.campos@gmail.com",
  "65172000100": "goncoostta@gmail.com",
  "82916721134": "elybarbiegirl@gmail.com",
  "54516501104": "ivonetefirminodeoliveira@outlook.com",
  "16023609104": "lnmagalhaes@gemail.com",
  "02300950111": "maikon-pinho@hotmail.com",
  "57173010144": "ildacandidaaugustalopes@gmail.com",
  "76937208120": "juliocezarferreiralopes@gmail.com",
  "69858330120": "distr.edgas@gmail.com",
  "54511100187": "kelwenalencar@gmail.com",
  "01146705107": "liciana.martinho@gmail.com",
  "99839490168": "martinh.bsilvahinode@gmail.com",
  "48348856153": "dersianne@gmail.com",
  "38387441104": "dersianne@gmail.com",
  "03009247125": "dersianne@gmail.com",
  "02825873144": "rodrigo.queryno1@gmail.com",
  "07763921153": "dersianne@gmail.com",
  "93076053191": "rosi-oliveirasilva@hotmail.com",
  "76814548968": "eduardovaz74@outlook.com",
  "53565134100": "jeanna.mt@hotmail.com",
  "06928821116": "vitoriaaquino655@gmail.com",
  // Adicione aqui novos pares de "CPF": "email",
  // CPFs com e-mail vazio foram omitidos.
};

// Esta é a função do servidor. Ela é executada de forma segura.
export default function handler(request, response) {
  // Pega o CPF que foi enviado pela página do usuário
  const { cpf } = request.query;

  // Verifica se o CPF foi enviado
  if (!cpf) {
    return response.status(400).json({ error: 'CPF não fornecido.' });
  }

  // Limpa o CPF para ter apenas números
  const cpfLimpo = cpf.replace(/\D/g, '');

  // Procura o e-mail na nossa base de dados segura
  const email = baseDeDados[cpfLimpo];

  if (email) {
    // Se encontrou, envia o e-mail de volta com sucesso
    return response.status(200).json({ email: email });
  } else {
    // Se não encontrou, envia uma mensagem de "não encontrado"
    return response.status(404).json({ error: 'CPF não encontrado.' });
  }
}
